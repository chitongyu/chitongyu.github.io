{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-22cfe362\"],{c5e7:function(e,t,a){},d419:function(e,t,a){\"use strict\";var r=a(\"c5e7\");a.n(r).a},f977:function(e,t,a){\"use strict\";a.r(t);a(\"34a3\"),a(\"63ff\");var r,o,s,n,i=a(\"ad3e\"),l=(a(\"49a5\"),{name:\"TaskReport\",components:{},filters:{},props:{},data:function(){return{searchObj:{page:1,pageSize:10,projectName:\"\",projectNumber:\"\",projectType:\"\",deptName:\"\",groupName:\"\",startCreateTime:\"\",endCreateTime:\"\"},projectName:\"\",projectNumber:\"\",projectType:\"\",deptName:\"\",groupName:\"\",startCreateTime:\"\",endCreateTime:\"\",loading:!1,adminList:[],selectedOrg:[],org:[],team:\"\",total:null,exportStatus:!0,dictValue:\"PROJECT_TYPE\",departType:\"1\",pickerOptions:{disabledDate:this.disabledDate}}},computed:{},watch:{},created:(n=Object(i.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllList();case 1:case\"end\":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),methods:{btnDiable:function(){return this.exportStatus},search:function(){if(this.searchObj.page=1,this.searchObj.projectName=this.projectName,this.searchObj.projectNumber=this.projectNumber,this.searchObj.projectType=this.projectType,this.searchObj.deptName=this.deptName,this.searchObj.groupName=this.groupName,this.searchObj.startCreateTime=this.startCreateTime,this.searchObj.endCreateTime=this.endCreateTime,\"\"==this.projectName&&\"\"==this.projectNumber&&\"\"==this.projectType&&\"\"==this.deptName&&\"\"==this.startCreateTime&&\"\"==this.endCreateTime)return this.$message({showClose:!0,message:\"请输入搜索条件\",type:\"warning\"}),this.adminList=[],void(this.exportStatus=!0);this.exportStatus=!1,this.getAdminList()},clearOut:function(){this.searchObj={page:1,pageSize:10},this.projectName=\"\",this.projectNumber=\"\",this.projectType=\"\",this.deptName=\"\",this.groupName=\"\",this.startCreateTime=\"\",this.endCreateTime=\"\",this.searchObj.endCreateTime=\"\",this.team=\"\",this.adminList=[],this.exportStatus=!0},refresh:function(){this.clearOut(),this.getAdminList()},getAdminList:function(){var t=this;t.loading=!0,t.$http.post(\"/admin/report/taskWorkReportByPage.d\",t.searchObj,function(e){t.adminList=e.body.rows,t.total=e.body.total,t.loading=!1},function(e){t.$message({showClose:!0,message:e.result.msg,type:\"warning\"}),t.loading=!1},function(e){t.$message({showClose:!0,message:e.error+\"-\"+e.message,type:\"warning\"}),t.loading=!1})},exportExcel:function(){var e=this,t=this.$store.getters[\"user/getToken\"],a=\"/admin/report/taskWorkReportExport.d?deptName=\"+e.searchObj.deptName+\"&groupName=\"+e.searchObj.groupName+\"&projectName=\"+e.searchObj.projectName+\"&projectNumber=\"+e.searchObj.projectNumber+\"&startCreateTime=\"+e.searchObj.startCreateTime+\"&endCreateTime=\"+e.searchObj.endCreateTime+\"&token=\"+t;window.location.href=a},disabledDate:function(e){var t=this.$dateFormat(this.startCreateTime,\"YYYY-MM-DD\"),a=new Date(t.replace(/-/,\"/\"));return e.getTime()<a},getAllList:(s=Object(i.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$api.common.getOrg();case 3:t.org=e.sent;case 4:case\"end\":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),handleSelectChange:function(){var e=this;0!=e.$refs.org.getCheckedNodes().length?(e.searchObj.deptName=e.$refs.org.getCheckedNodes()[0].pathLabels[0],e.searchObj.groupName=e.$refs.org.getCheckedNodes()[0].pathLabels[1],e.deptName=e.searchObj.deptName,e.groupName=e.searchObj.groupName):(e.searchObj.deptName=\"\",e.searchObj.groupName=\"\",e.deptName=\"\",e.groupName=\"\")},remoteMethod:(o=Object(i.a)(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,\"\"!=t)return a.selectLoading=!0,e.next=5,this.$api.common.getProject({values:t});e.next=9;break;case 5:a.projectList=e.sent,a.selectLoading=!1,e.next=10;break;case 9:a.projectList=[];case 10:case\"end\":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),remoteMethodDefault:(r=Object(i.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).selectLoading=!0,e.next=4,this.$api.common.getProject();case 4:t.projectList=e.sent,t.selectLoading=!1;case 6:case\"end\":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}}),c=(a(\"d419\"),a(\"6691\")),p=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"TaskWorkReport w100 h100 flex column\"},[t.btPermissions[\"/backend/taskWorkReport\"]?[a(\"div\",{staticClass:\"header w100\"},[a(\"el-row\",{staticClass:\"row1 padding1\",attrs:{gutter:5}},[a(\"el-col\",{attrs:{span:4}},[a(\"el-input\",{attrs:{clearable:\"\",name:\"admin-projectNumber\",placeholder:\"请输入项目编号\"},model:{value:t.projectNumber,callback:function(e){t.projectNumber=\"string\"==typeof e?e.trim():e},expression:\"projectNumber\"}})],1),a(\"el-col\",{attrs:{span:4}},[a(\"el-input\",{attrs:{clearable:\"\",name:\"admin-projectName\",placeholder:\"请输入项目名称\"},model:{value:t.projectName,callback:function(e){t.projectName=\"string\"==typeof e?e.trim():e},expression:\"projectName\"}})],1),a(\"el-col\",{attrs:{span:5}},[a(\"el-cascader\",{ref:\"org\",attrs:{options:t.org,props:{value:\"id\",label:\"name\",checkStrictly:!0},clearable:\"\",filterable:\"\",placeholder:\"请选择部门或班组\"},on:{change:t.handleSelectChange},model:{value:t.team,callback:function(e){t.team=\"string\"==typeof e?e.trim():e},expression:\"team\"}})],1),a(\"el-col\",{staticClass:\"col1\",attrs:{span:15}},[a(\"span\",{staticClass:\"fs_14\"},[t._v(\"报工日期范围:\")]),a(\"el-col\",{attrs:{span:4}},[a(\"el-date-picker\",{attrs:{placeholder:\"选择日期\",type:\"date\",\"value-format\":\"yyyy-MM-dd\"},model:{value:t.startCreateTime,callback:function(e){t.startCreateTime=\"string\"==typeof e?e.trim():e},expression:\"startCreateTime\"}})],1),a(\"el-col\",{attrs:{span:4}},[a(\"el-date-picker\",{attrs:{\"picker-options\":t.pickerOptions,placeholder:\"选择日期\",type:\"date\",\"value-format\":\"yyyy-MM-dd\"},model:{value:t.endCreateTime,callback:function(e){t.endCreateTime=\"string\"==typeof e?e.trim():e},expression:\"endCreateTime\"}})],1),a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.btPermissions[\"/backend/taskWorkReport/select\"],expression:\"btPermissions['/backend/taskWorkReport/select']\"}],style:{\"background-color\":t.bgColor.selectBt,\"border-color\":t.bgColor.selectBt},attrs:{size:\"small\",type:\"primary\"},on:{click:function(e){return t.search()}}},[t._v(\"搜索\")])],1),a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{style:{\"background-color\":t.bgColor.clearBt,\"border-color\":t.bgColor.clearBt},attrs:{size:\"small\",type:\"primary\"},on:{click:function(e){return t.clearOut()}}},[t._v(\"清除\")])],1),a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.btPermissions[\"/backend/taskWorkReport/export\"],expression:\"btPermissions['/backend/taskWorkReport/export']\"}],style:{\"background-color\":t.bgColor.updateBt,\"border-color\":t.bgColor.updateBt},attrs:{disabled:t.btnDiable(),size:\"small\",type:\"primary\"},on:{click:function(e){return t.exportExcel()}}},[t._v(\"导出搜索内容\")])],1)],1)],1),a(\"el-row\",{staticClass:\"row2\",attrs:{gutter:5}})],1),a(\"div\",{staticClass:\"bg_white w100 h100\"},[0==t.adminList.length?a(\"NoData\"):a(\"CommonTable\",{staticStyle:{width:\"100%\"},attrs:{\"default-sort\":{prop:\"id\",order:\"ascending\"},ifStripe:!0,pageSizeNum:10,tableData:t.adminList,border:\"\",\"highlight-current-row\":\"\",refreshFuncName:\"getAdminList\",\"max-height\":\"600\"}},[a(\"template\",{slot:\"main\"},[a(\"el-table-column\",{attrs:{align:\"center\",label:\"序号\",prop:\"rowNum\",width:\"60\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"项目类型\",prop:\"projectType\"}}),a(\"el-table-column\",{attrs:{align:\"center\",fixed:\"\",label:\"项目编号\",prop:\"projectNumber\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"项目名称\",prop:\"projectName\",width:\"400\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"项目经理\",prop:\"managerName\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"线体\",prop:\"lineName\",width:\"200\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"工作模块\",prop:\"moduleName\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"任务名称\",prop:\"taskName\",width:\"300\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"标准交期\",prop:\"deliveryTime\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"计划开始日期 \",prop:\"planStartTime\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"要求完成日期\",prop:\"planEndTime\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"预计投入工时\",prop:\"planManHours\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"累计工时投入\",prop:\"actualManHours\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"剩余工时\",prop:\"leftManHours\",width:\"90\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"累计工作完成率\",prop:\"totalCompletionRate\",width:\"120\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"div\",[t._v(t._s(t.$isEmpty(t.$toInt(e.row.totalCompletionRate,2))?\"\":t.$toInt(e.row.totalCompletionRate,2)+\"%\"))])]}}])}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"任务状态\",prop:\"taskStatus\",width:\"90\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"负责人\",prop:\"principalAdminName\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"负责人工号\",prop:\"principalAdminCode\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"负责人部门\",prop:\"deptName\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"负责人班组\",prop:\"groupName\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"报工日期\",prop:\"recordDate\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"投入工时\",prop:\"manHours\",width:\"100\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"今日完成率\",prop:\"completionRate\",width:\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"div\",[t._v(t._s(t.$isEmpty(t.$toInt(e.row.completionRate,2))?\"\":t.$toInt(e.row.completionRate,2)+\"%\"))])]}}])}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"报工描述\",prop:\"description\"}})],1)],2)],1)]:a(\"NoPerimission\")],2)},[],!1,null,\"b0596ba2\",null);t.default=p.exports}}]);"}