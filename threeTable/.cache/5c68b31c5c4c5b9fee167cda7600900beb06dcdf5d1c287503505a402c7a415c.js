{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-6a7c2442\"],{\"63ff\":function(t,e,r){var n=function(o){\"use strict\";var c,t=Object.prototype,u=t.hasOwnProperty,e=\"function\"==typeof Symbol?Symbol:{},a=e.iterator||\"@@iterator\",r=e.asyncIterator||\"@@asyncIterator\",n=e.toStringTag||\"@@toStringTag\";function i(t,e,r,n){var a=e&&e.prototype instanceof s?e:s,o=Object.create(a.prototype),i=new $(n||[]);return o._invoke=function(o,i,s){var c=d;return function(t,e){if(c===p)throw new Error(\"Generator is already running\");if(c===m){if(\"throw\"===t)throw e;return T()}for(s.method=t,s.arg=e;;){var r=s.delegate;if(r){var n=L(r,s);if(n){if(n===f)continue;return n}}if(\"next\"===s.method)s.sent=s._sent=s.arg;else if(\"throw\"===s.method){if(c===d)throw c=m,s.arg;s.dispatchException(s.arg)}else\"return\"===s.method&&s.abrupt(\"return\",s.arg);c=p;var a=l(o,i,s);if(\"normal\"===a.type){if(c=s.done?m:h,a.arg===f)continue;return{value:a.arg,done:s.done}}\"throw\"===a.type&&(c=m,s.method=\"throw\",s.arg=a.arg)}}}(t,r,i),o}function l(t,e,r){try{return{type:\"normal\",arg:t.call(e,r)}}catch(t){return{type:\"throw\",arg:t}}}o.wrap=i;var d=\"suspendedStart\",h=\"suspendedYield\",p=\"executing\",m=\"completed\",f={};function s(){}function g(){}function v(){}var y={};y[a]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(E([])));b&&b!==t&&u.call(b,a)&&(y=b);var x=v.prototype=s.prototype=Object.create(y);function _(t){[\"next\",\"throw\",\"return\"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(c){var e;this._invoke=function(r,n){function t(){return new Promise(function(t,e){!function e(t,r,n,a){var o=l(c[t],c,r);if(\"throw\"!==o.type){var i=o.arg,s=i.value;return s&&\"object\"==typeof s&&u.call(s,\"__await\")?Promise.resolve(s.__await).then(function(t){e(\"next\",t,n,a)},function(t){e(\"throw\",t,n,a)}):Promise.resolve(s).then(function(t){i.value=t,n(i)},function(t){return e(\"throw\",t,n,a)})}a(o.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function L(t,e){var r=t.iterator[e.method];if(r===c){if(e.delegate=null,\"throw\"===e.method){if(t.iterator.return&&(e.method=\"return\",e.arg=c,L(t,e),\"throw\"===e.method))return f;e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return f}var n=l(r,t.iterator,e.arg);if(\"throw\"===n.type)return e.method=\"throw\",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=c),e.delegate=null,f):a:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(j,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t};return n.next=n}}return{next:T}}function T(){return{value:c,done:!0}}return g.prototype=x.constructor=v,v.constructor=g,v[n]=g.displayName=\"GeneratorFunction\",o.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===g||\"GeneratorFunction\"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,n in t||(t[n]=\"GeneratorFunction\")),t.prototype=Object.create(x),t},o.awrap=function(t){return{__await:t}},_(k.prototype),k.prototype[r]=function(){return this},o.AsyncIterator=k,o.async=function(t,e,r,n){var a=new k(i(t,e,r,n));return o.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(x),x[n]=\"Generator\",x[a]=function(){return this},x.toString=function(){return\"[object Generator]\"},o.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=E,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=c,this.tryEntries.forEach(N),!t)for(var e in this)\"t\"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return o.type=\"throw\",o.arg=r,n.next=t,e&&(n.method=\"next\",n.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var a=this.tryEntries[e],o=a.completion;if(\"root\"===a.tryLoc)return t(\"end\");if(a.tryLoc<=this.prev){var i=u.call(a,\"catchLoc\"),s=u.call(a,\"finallyLoc\");if(i&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error(\"try statement without catch or finally\");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,\"finallyLoc\")&&this.prev<n.finallyLoc){var a=n;break}}a&&(\"break\"===t||\"continue\"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method=\"next\",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if(\"throw\"===n.type){var a=n.arg;N(r)}return a}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},\"next\"===this.method&&(this.arg=c),f}},o}(t.exports);try{regeneratorRuntime=n}catch(t){Function(\"r\",\"regeneratorRuntime = r\")(n)}},\"733a\":function(t,e,r){},\"905f\":function(t,e,r){\"use strict\";var n=r(\"733a\");r.n(n).a},a2a0:function(t,e,r){\"use strict\";r.r(e);var n,a,o,i,s,c,u=r(\"5bf7\"),l=(r(\"63ff\"),r(\"ad3e\")),d={name:\"create-task\",components:{},filters:{},props:{},data:function(){return{departName:this.$store.getters[\"user/getInfo\"]&&this.$store.getters[\"user/getInfo\"].deptName,groupName:this.$store.getters[\"user/getInfo\"]&&this.$store.getters[\"user/getInfo\"].groupName,departId:this.$store.getters[\"user/getInfo\"]&&this.$store.getters[\"user/getInfo\"].deptId,groupId:this.$store.getters[\"user/getInfo\"]&&this.$store.getters[\"user/getInfo\"].groupId,tableData:[{id:2,name:\"test\",value:1},{id:1,name:\"test\",value:1}],searchObj:{page:1,pageSize:15},total:100,taskStatus:0,addForms:[{projectNumber:\"\",lineName:\"\",principalAdminCode:\"\",moduleId:\"\",name:\"\",description:\"\",planStartTime:\"\",planEndTime:\"\",planManHours:\"\"}],users:[],list:[],moduleList:[[]],projectList:[],loading:!1,userLoading:!1,projectLoading:!1}},computed:{},watch:{},created:(c=Object(l.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case 2:case\"end\":return t.stop()}},t,this)})),function(){return c.apply(this,arguments)}),methods:{refresh:function(){},handlerDate:function(t,e,r){this.$moment(e.planEndTime).valueOf()<this.$moment(e.planStartTime).valueOf()&&(e[r]=\"\",this.$message({showClose:!0,message:\"预计完成时间不能小于计划开始时间\",type:\"warning\"}))},changeName:(s=Object(l.a)(regeneratorRuntime.mark(function t(e,r,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.moduleId=null,t.t0=this,t.t1=this.moduleList,t.t2=n,t.next=6,this.$api.common.getModule({values:e});case 6:t.t3=t.sent,t.t0.$set.call(t.t0,t.t1,t.t2,t.t3);case 8:case\"end\":return t.stop()}},t,this)})),function(t,e,r){return s.apply(this,arguments)}),moduleFocus:function(t,e){this.$isEmpty(e.principalAdminCode)&&this.$message({showClose:!0,message:\"请先选择指派人\",type:\"warning\"})},userFocus:(i=Object(l.a)(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.$api.common.getNativeUser();case 3:this.users=t.sent;case 4:case\"end\":return t.stop()}},t,this)})),function(t,e){return i.apply(this,arguments)}),projectFocus:(o=Object(l.a)(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.$api.common.getProject();case 3:this.projectList=t.sent;case 4:case\"end\":return t.stop()}},t,this)})),function(t,e){return o.apply(this,arguments)}),remoteMethod:(a=Object(l.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(\"\"!==e)return this.userLoading=!0,t.next=5,this.$api.common.getNativeUser({name:e});t.next=9;break;case 5:this.users=t.sent,this.userLoading=!1,t.next=14;break;case 9:return this.userLoading=!0,t.next=12,this.$api.common.getNativeUser({name:e});case 12:this.users=t.sent,this.userLoading=!1;case 14:case\"end\":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)}),projectRemoteMethod:(n=Object(l.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(\"\"!==e)return this.projectLoading=!0,t.next=5,this.$api.common.getProject({values:e});t.next=9;break;case 5:this.projectList=t.sent,this.projectLoading=!1,t.next=10;break;case 9:this.projectList=[];case 10:case\"end\":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)}),addNode:function(t){var e=this.addForms[t],r={projectNumber:e.projectNumber,lineName:e.lineName,principalAdminCode:e.principalAdminCode,moduleId:e.moduleId,name:\"\",description:\"\",planStartTime:e.planEndTime,planEndTime:\"\",planManHours:\"\"};this.addForms.splice(t+1,0,r);var n=JSON.parse(JSON.stringify(this.moduleList[t]));this.moduleList.splice(t+1,0,n)},deleteNode:function(t){1<this.addForms.length?(this.addForms.splice(t,1),this.moduleList.splice(t,1)):this.$message({showClose:!0,message:\"不能再删除了\",type:\"warning\"})},save:function(){for(var t,e=this,r=(t={projectNumber:\"项目编号\",lineName:\"线体\",moduleId:\"工作模块\",principalAdminCode:\"责任人\",name:\"任务名称\",description:\"任务描述\"},Object(u.a)(t,\"lineName\",\"线体\"),Object(u.a)(t,\"planStartTime\",\"计划开始时间\"),Object(u.a)(t,\"planEndTime\",\"计划完成时间\"),Object(u.a)(t,\"planManHours\",\"计划投入工时\"),t),n=0;n<this.addForms.length;n++){var a=this.addForms[n];for(var o in a.departmentId=this.departId,a.groupId=this.groupId,a){if(this.$isEmpty(a[o])&&\"lineName\"!=o&&\"description\"!=o&&\"planManHours\"!=o)return void this.$message({showClose:!0,message:\"请填写完整\"+r[o],type:\"warning\"});if(\"planManHours\"==o&&a.planManHours<=0)return void this.$message({showClose:!0,message:\"计划投入工时范围必须大于0\",type:\"warning\"})}}this.$confirm(\"确认提交?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){e.commitAdd()}).catch(function(){e.$message({type:\"info\",message:\"已取消\"})})},commitAdd:function(){var e=this;e.loading=!0,e.addDialogFormVisible=!1,e.$http.post(\"/admin/tfTask/adds.d\",{tfTasksStr:JSON.stringify(e.addForms)},function(t){e.$message({showClose:!0,message:\"新增成功\",type:\"success\"}),e.loading=!1,e.$backTo()},function(t){e.$message({showClose:!0,message:t.result.msg,type:\"warning\"}),e.loading=!1},function(t){e.$message({showClose:!0,message:t.error+\"-\"+t.message,type:\"warning\"}),e.loading=!1})}}},h=(r(\"905f\"),r(\"6691\")),p=Object(h.a)(d,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a(\"div\",{staticClass:\"create-task w100 rel\"},[a(\"div\",{staticClass:\"bg_white pos padding2 padding-left4\"},[a(\"el-breadcrumb\",{attrs:{\"separator-class\":\"iconfont icon-you \"}},[a(\"el-breadcrumb-item\",[n._v(\"明珞\")]),a(\"el-breadcrumb-item\",[n._v(n._s(n.departName))]),a(\"el-breadcrumb-item\",[n._v(n._s(n.groupName))]),a(\"el-breadcrumb-item\",[a(\"span\",{staticClass:\"navItem\",on:{click:function(t){return n.$backTo()}}},[n._v(\"任务\")])]),a(\"el-breadcrumb-item\",[n._v(\"批量创建任务\")])],1)],1),a(\"div\",{staticClass:\"task-status fs_13 padding2 padding-left4  flex_row_between\"},[a(\"span\",[n._v(\"批量创建\")]),a(\"div\",{staticClass:\"flex_row_start\"},[a(\"el-button\",{staticClass:\"fs_13 margin-right4 flex_row_center\",attrs:{type:\"primary\",icon:\"icon-fanhui iconfont fs_13\"},on:{click:function(t){return n.$backTo()}}},[n._v(\"返回\")])],1)]),a(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:n.loading,expression:\"loading\"}],staticClass:\"create-task-table bg_white  margin-left4 margin-right4 border\"},[a(\"table\",{staticClass:\"w100  tableForm\"},[a(\"tbody\",[n._m(0),n._l(n.addForms,function(e,r){return a(\"tr\",{key:r},[a(\"td\",{attrs:{width:\"50\"}},[n._v(n._s(r+1))]),a(\"td\",{attrs:{width:\"150\"}},[a(\"el-select\",{attrs:{clearable:\"\",filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",\"remote-method\":n.projectRemoteMethod,loading:n.projectLoading,placeholder:\"请输入项目编号\"},on:{focus:function(t){n.projectFocus(t,e)}},model:{value:e.projectNumber,callback:function(t){n.$set(e,\"projectNumber\",t)},expression:\"item.projectNumber\"}},n._l(n.projectList,function(t){return a(\"el-option\",{key:t.sapCode,attrs:{label:t.projectNumber+\"-\"+t.projectName,value:t.projectNumber}})}),1)],1),a(\"td\",{attrs:{width:\"120\"}},[a(\"el-input\",{attrs:{placeholder:\"输入线体名\",maxlength:20,clearable:\"\"},model:{value:e.lineName,callback:function(t){n.$set(e,\"lineName\",t)},expression:\"item.lineName\"}})],1),a(\"td\",{attrs:{width:\"100\"}},[a(\"el-select\",{attrs:{clearable:\"\",filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"输入姓名\",\"remote-method\":n.remoteMethod,loading:n.userLoading},on:{change:function(t){n.changeName(t,e,r)},focus:function(t){n.userFocus(t,e)}},model:{value:e.principalAdminCode,callback:function(t){n.$set(e,\"principalAdminCode\",t)},expression:\"item.principalAdminCode\"}},n._l(n.users,function(t){return a(\"el-option\",{key:t.code,attrs:{label:t.name+\"-\"+t.code,value:t.code}})}),1)],1),a(\"td\",{attrs:{width:\"150\"}},[a(\"el-select\",{attrs:{clearable:\"\",filterable:\"\",placeholder:\"选择模块\"},on:{focus:function(t){n.moduleFocus(t,e)}},model:{value:e.moduleId,callback:function(t){n.$set(e,\"moduleId\",t)},expression:\"item.moduleId\"}},n._l(n.moduleList[r],function(t){return a(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a(\"td\",{attrs:{width:\"250\"}},[a(\"el-input\",{attrs:{placeholder:\"输入任务名称\",maxlength:20,clearable:\"\"},model:{value:e.name,callback:function(t){n.$set(e,\"name\",t)},expression:\"item.name\"}})],1),a(\"td\",{attrs:{width:\"250\"}},[a(\"el-input\",{attrs:{placeholder:\"任务描述\",maxlength:30,clearable:\"\"},model:{value:e.description,callback:function(t){n.$set(e,\"description\",t)},expression:\"item.description\"}})],1),a(\"td\",{attrs:{width:\"100\"}},[a(\"el-date-picker\",{staticStyle:{width:\"100px\"},attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"计划开始时间\"},on:{change:function(t){n.handlerDate(t,e,\"planStartTime\")}},model:{value:e.planStartTime,callback:function(t){n.$set(e,\"planStartTime\",t)},expression:\"item.planStartTime\"}})],1),a(\"td\",{attrs:{width:\"100\"}},[a(\"el-date-picker\",{staticStyle:{width:\"100px\"},attrs:{type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"预计完成时间\"},on:{change:function(t){n.handlerDate(t,e,\"planEndTime\")}},model:{value:e.planEndTime,callback:function(t){n.$set(e,\"planEndTime\",t)},expression:\"item.planEndTime\"}})],1),a(\"td\",{attrs:{width:\"100\"}},[a(\"el-input\",{staticStyle:{width:\"100px\"},attrs:{placeholder:\"预计投入工时\",type:\"Number\",clearable:\"\"},model:{value:e.planManHours,callback:function(t){n.$set(e,\"planManHours\",t)},expression:\"item.planManHours\"}})],1),a(\"td\",{attrs:{width:\"100\"}},[a(\"div\",[a(\"i\",{staticClass:\"iconfont icon-jia fs_20 cl_blue\",on:{click:function(t){return n.addNode(r)}}}),a(\"i\",{staticClass:\"iconfont icon-cha fs_20 cl_red\",on:{click:function(t){return n.deleteNode(r)}}})])])])})],2)]),a(\"div\",{staticClass:\"w100 flex_row_center padding1\"},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return n.save()}}},[n._v(\"保存\")]),a(\"el-button\",{on:{click:n.$backTo}},[n._v(\"返回\")])],1)])])},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"tr\",{staticClass:\"header\"},[r(\"td\",{attrs:{width:\"50\"}},[t._v(\"序号\")]),r(\"td\",{attrs:{width:\"150\"}},[t._v(\"项目编号\")]),r(\"td\",{attrs:{width:\"100\"}},[t._v(\"线体\")]),r(\"td\",{attrs:{width:\"100\"}},[t._v(\"指派给\")]),r(\"td\",{attrs:{width:\"150\"}},[t._v(\"工作模块\")]),r(\"td\",{attrs:{width:\"200\"}},[t._v(\"任务名称\")]),r(\"td\",{attrs:{width:\"200\"}},[t._v(\"任务描述\")]),r(\"td\",{attrs:{width:\"100\"}},[t._v(\"计划开始时间\")]),r(\"td\",{attrs:{width:\"100\"}},[t._v(\"预计完成时间\")]),r(\"td\",{attrs:{width:\"100\"}},[t._v(\"计划投入工时(h)\")]),r(\"td\",{attrs:{width:\"100\"}})])}],!1,null,\"2a582a8b\",null);e.default=p.exports},ad3e:function(t,e,r){\"use strict\";function c(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function n(s){return function(){var t=this,i=arguments;return new Promise(function(e,r){var n=s.apply(t,i);function a(t){c(n,e,r,a,o,\"next\",t)}function o(t){c(n,e,r,a,o,\"throw\",t)}a(void 0)})}}r.d(e,\"a\",function(){return n})}}]);"}